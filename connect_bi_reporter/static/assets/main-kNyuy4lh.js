import{s as I,a as z,V as q,H as U,p as M,v as V,o as G,l as j,b as H,w as X,z as K,c as W}from"./connect-DtTAwa_J.js";import{c as w,o as i,b as u,t as v,d as p,u as c,e as S,a as C,r as O,f as P,F as R,g as L,h as Y,j as D,w as A,k as B,R as Q,n as Z,l as J,m as ee,p as te,q as oe,s as se,v as ne,x as ae}from"./vendor-C1Ys0kcB.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function s(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(t){if(t.ep)return;t.ep=!0;const o=s(t);fetch(t.href,o)}})();const re="modulepreload",ie=function(n){return"/static/"+n},N={},ce=function(e,s,r){let t=Promise.resolve();if(s&&s.length>0){const o=document.getElementsByTagName("link");t=Promise.all(s.map(a=>{if(a=ie(a),a in N)return;N[a]=!0;const l=a.endsWith(".css"),f=l?'[rel="stylesheet"]':"";if(!!r)for(let E=o.length-1;E>=0;E--){const _=o[E];if(_.href===a&&(!l||_.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${f}`))return;const h=document.createElement("link");if(h.rel=l?"stylesheet":re,l||(h.as="script",h.crossOrigin=""),h.href=a,document.head.appendChild(h),l)return new Promise((E,_)=>{h.addEventListener("load",E),h.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${a}`)))})}))}return t.then(()=>e()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})},le={__name:"DateItem",props:{date:{type:String,required:!0}},setup(n){const{sharedContext:e}=I(),s=n,r=w(()=>{var o,a,l;return new Intl.DateTimeFormat((o=e==null?void 0:e.timezoneInfo)==null?void 0:o.region.replace("_","-"),{timeZone:(a=e==null?void 0:e.timezoneInfo)==null?void 0:a.timezone,hourCycle:(l=e==null?void 0:e.timezoneInfo)!=null&&l.time_24h?"h23":"h12",timeStyle:"short",dateStyle:"short"}).format(new Date(s.date))});return(t,o)=>(i(),u("span",null,v(r.value),1))}},m={NICE_GREEN:"#0BB071",NICE_RED:"#FF6A6A",MIDDLE_GREY:"#BDBDBD",DARK_GREY:"#666666",NICE_BLUE:"#2C98F0",DARKER_BLUE:"#4797f2",TEXT:"#212121",WHITE:"#FFFFFF",TRANSPARENT:"transparent"},T=(n,e)=>{const s=n.__vccOpts||n;for(const[r,t]of e)s[r]=t;return s},de={class:"empty-placeholder"},ue={class:"empty-placeholder_content"},pe={class:"empty-placeholder_icon"},fe=["icon-name","color"],_e=["color"],he=["color"],me={__name:"EmptyPlaceholder",props:{title:{type:String,default:"No data"},message:{type:String,default:"There is no data to be shown."},icon:{type:String,default:"googleQuestionMarkBaseline"},action:{type:String,default:""}},emits:["actionClicked"],setup(n){return(e,s)=>(i(),u("div",de,[p("div",ue,[p("div",pe,[p("ui-icon",{"icon-name":n.icon,color:c(m).MIDDLE_GREY,size:"56"},null,8,fe)]),p("h2",null,v(n.title),1),p("p",null,v(n.message),1),n.action?(i(),u("ui-button",{key:0,class:"empty-placeholder_action","background-color":"transparent",color:c(m).NICE_BLUE,onClicked:s[0]||(s[0]=r=>e.$emit("actionClicked"))},[p("ui-icon",{"icon-name":"googleAddBaseline",color:c(m).NICE_BLUE,size:"18"},null,8,he),p("span",null,v(n.action),1)],40,_e)):S("",!0)])]))}},ge=T(me,[["__scopeId","data-v-47ae6665"]]);class ye extends Error{constructor(e,s){super(e),this.status=s}}const Ee=(n,e)=>{let s=`Error ${n.status}: ${n.statusText}.`;return e&&(e.error_code&&(s+=` Error code: ${e.error_code}.`),e.errors&&e.errors.map(r=>{s+=` ${r}`})),s},ve=async n=>{let e;try{e=await n.clone().json()}catch{e=await n.text()}return e},be=async(n,e="GET",s=null,r=!1)=>{const t={method:e};s&&(t.body=s);const o=await fetch(n,t),a=await ve(o);if(!o.ok){const l=Ee(o,a);throw new ye(l)}return r?{...o,body:a}:a},x=(n,e=!1)=>{const s=C(!1),r=O({});return{loading:s,result:r,request:async(o,a,l)=>{s.value=!0;try{const f=await be(o,a,l,!0);return Object.assign(r,f.body),f.status}catch(f){if(n.emit("snackbar:error",f.message),e)throw f;return f.status}finally{s.value=!1}}}},F={ENABLED:"enabled",DISABLED:"disabled"},ke={[F.ENABLED]:{text:"Enabled",icon:"googleFiberManualRecordBaseline",color:m.NICE_GREEN},[F.DISABLED]:{text:"Disabled",icon:"googleFiberManualRecordBaseline",color:m.MIDDLE_GREY}},De={class:"feed-actions",align:"right"},we={slot:"trigger"},$e={slot:"content",class:"actions-menu"},Se={key:0,class:"horizontal-divider"},xe=["background-color","color","disabled","onClicked"],Ie={class:"button-content"},Te=["icon-name","color"],Ae={__name:"FeedActions",props:{feed:{type:Object,required:!0}},emits:["enabled","disabled","uploaded","deleted"],setup(n,{emit:e}){const s=n,r=e,t=I(),o=x(t),a=x(t),l=x(t),f=x(t),b=w(()=>s.feed.id),h=w(()=>s.feed.status===F.DISABLED),E=async()=>{await a.request(`/api/feeds/${b.value}/disable`,"POST")<400&&r("disabled")},_=async()=>{await o.request(`/api/feeds/${b.value}/enable`,"POST")<400&&r("enabled")},k=async()=>{await f.request(`/api/feeds/${b.value}/uploads/force`,"POST")<400&&r("uploaded")},d=async()=>{await l.request(`/api/feeds/${b.value}`,"DELETE")<400&&r("deleted")},g=O([{action:"disable",color:m.TEXT,text:"Disable",icon:"googleToggleOffBaseline",loading:a.loading,hide:h,handler:E},{action:"enable",color:m.TEXT,text:"Enable",icon:"googleToggleOnBaseline",loading:o.loading,hide:!h.value,handler:_},{action:"forceUpload",color:m.TEXT,text:"Force upload",icon:"googleUploadBaseline",loading:f.loading,disabled:h.value,handler:k},{separated:!0,action:"delete",color:m.NICE_RED,text:"Delete",icon:"googleDeleteForeverBaseline",loading:l.loading,handler:d}]);return($,We)=>(i(),u("ui-menu",De,[p("div",we,[P($.$slots,"default",{},void 0,!0)]),p("div",$e,[(i(!0),u(R,null,L(g,y=>(i(),u("div",{key:y.action,class:"action-button__wrapper"},[y.separated?(i(),u("div",Se)):S("",!0),y.hide?S("",!0):(i(),u("ui-button",{key:1,ref_for:!0,ref:y.action,class:"action-button","background-color":c(m).TRANSPARENT,color:y.color,disabled:y.disabled,height:"32px",width:"156px",onClicked:y.handler},[p("div",Ie,[p("ui-icon",{"icon-name":y.loading?"connectLoaderAnimated":y.icon,color:y.color,size:"18"},null,8,Te),p("span",null,v(y.text),1)])],40,xe))]))),128))])]))}},Re=T(Ae,[["__scopeId","data-v-762a5876"]]),Le={class:"loading-indicator"},Fe=["size","color"],Be={__name:"LoadingIndicator",props:{size:{type:[Number,String],default:76}},setup(n){return(e,s)=>(i(),u("div",Le,[p("ui-icon",{"icon-name":"connectLoaderAnimated",size:n.size,color:c(m).DARKER_BLUE},null,8,Fe)]))}},Ne=T(Be,[["__scopeId","data-v-bf2c85cd"]]),Ce={__name:"SpaLink",props:{to:{type:[String,Object,Symbol],default:""},params:{type:[String,Number,Object],required:!1,default:void 0}},setup(n){const e=n,{navigateTo:s}=I(),r=t=>{t.preventDefault(),t.stopPropagation(),s(e.to,e.params)};return(t,o)=>(i(),u("a",{onClick:r},[P(t.$slots,"default")]))}},Oe={title:"Feeds",style:{height:"inherit"},"no-padded":""},Pe=["total-items","current-page"],ze=["icon-name","icon-color","text"],qe=["background-color"],Ue=["color"],Me={key:5,class:"truncator"},Ve={__name:"FeedsView",setup(n){const e=[{key:"id",text:"ID",width:"130px"},{key:"schedule",text:"Report Schedule",width:"215px"},{key:"createdAt",text:"created",width:"200px"},{key:"description",text:"description"},{key:"status",text:"status",width:"105px"},{key:"actions",width:"36px"}],{items:s,page:r,total:t,load:o,loading:a,next:l,previous:f}=z("/api/feeds"),b=w(()=>!s.value.length),h=w(()=>s.value.map(_=>({id:_.id,scheduleId:_.schedule.id,createdAt:_.events.created.at,description:_.description,status:ke[_.status],rawFeed:_}))),E=()=>{};return Y(async()=>{await o()}),(_,k)=>(i(),u("ui-view",Oe,[c(a)?(i(),D(Ne,{key:0})):b.value?(i(),D(ge,{key:1,title:"No Feeds",icon:"googleAutoGraphBaseline",action:"Create Feed",onActionClicked:E})):(i(),u("ui-complex-table",{key:2,headers:e,"total-items":c(t),"current-page":c(r),fixed:"",onNextClicked:k[0]||(k[0]=(...d)=>c(l)&&c(l)(...d)),onPreviousClicked:k[1]||(k[1]=(...d)=>c(f)&&c(f)(...d))},[(i(!0),u(R,null,L(h.value,d=>(i(),u("tr",{key:d.id},[(i(),u(R,null,L(e,g=>p("td",{key:g.key},[g.key==="id"?(i(),D(c(Q),{key:0,to:{name:"feeds.details",params:{id:d.id}}},{default:A(()=>[B(v(d.id),1)]),_:2},1032,["to"])):g.key==="schedule"?(i(),D(Ce,{key:1,to:c(q).reportsScheduleDetails,params:d.scheduleId},{default:A(()=>[B(v(d.scheduleId),1)]),_:2},1032,["to","params"])):g.key==="status"?(i(),u("ui-status",{key:2,"icon-name":d.status.icon,"icon-color":d.status.color,text:d.status.text},null,8,ze)):g.key==="createdAt"?(i(),D(le,{key:3,date:d.createdAt},null,8,["date"])):S("",!0),g.key==="actions"?(i(),D(Re,{key:4,feed:d.rawFeed,onEnabled:c(o),onDisabled:c(o),onUploaded:c(o),onDeleted:c(o)},{default:A(()=>[p("ui-button",{class:"actions-button","background-color":c(m).WHITE,height:"36px",width:"36px"},[p("ui-icon",{class:"actions-button__trigger-icon",color:c(m).TEXT,"icon-name":"googleMoreVertBaseline"},null,8,Ue)],8,qe)]),_:2},1032,["feed","onEnabled","onDisabled","onUploaded","onDeleted"])):g.key==="description"?(i(),u("div",Me,[p("span",{class:Z(["truncate-text",{"assistive-color":!d[g.key]}])},v(d[g.key]||"â€”"),3)])):S("",!0)])),64))]))),128))],40,Pe))]))}},Ge=T(Ve,[["__scopeId","data-v-3a62be6d"]]),je=[{path:"/",redirect:{name:"feeds"}},{name:"feeds",path:"/feeds",component:Ge},{name:"feeds.details",path:"/feeds/:id",component:()=>ce(()=>import("./FeedDetails-D5TuPUsj.js"),__vite__mapDeps([0,1,2,3]))}],He=J({history:ee(),routes:je}),Xe=p("div",{class:"dialogs-container"},null,-1),Ke={__name:"MainPage",setup(n){const e=C(""),s=w(()=>({height:e.value}));return I().listen("fullscreenSize",({height:t})=>{e.value=`${t}px`}),te("fullscreen-height",e),(t,o)=>(i(),u("div",{class:"app",style:ne(s.value)},[Xe,oe(c(se))],4))}};U({"ui-view":M,"ui-complex-table":V,"ui-icon":G,"ui-button":j,"ui-status":H,"ui-menu":X,"ui-tabs":K}).then(n=>{const e=ae(Ke);e.use(He),e.use(W,n),e.mount("#app")});export{m as C,Re as F,Ne as L,ke as S,T as _,Ce as a,le as b,x as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/FeedDetails-D5TuPUsj.js","assets/connect-DtTAwa_J.js","assets/vendor-C1Ys0kcB.js","assets/FeedDetails-vBWFmYWj.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
