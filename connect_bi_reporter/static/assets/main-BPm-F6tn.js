import{s as $,a as O,V as P,H as z,p as q,v as M,o as V,l as U,b as j,w as G,z as H,c as X}from"./connect-C3hWo6Jn.js";import{c as b,o as c,b as u,t as v,d as f,e as w,p as W,f as Y,a as L,r as N,g as C,F as T,h as A,u as p,j as K,k as E,w as I,l as F,R as Q,n as Z,m as J,q as ee,s as te,v as oe,x as se,y as ne}from"./vendor-DFOWnqr8.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(t){if(t.ep)return;t.ep=!0;const o=n(t);fetch(t.href,o)}})();const ae="modulepreload",re=function(s){return"/static/"+s},R={},ie=function(e,n,i){let t=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link");t=Promise.all(n.map(a=>{if(a=re(a),a in R)return;R[a]=!0;const l=a.endsWith(".css"),h=l?'[rel="stylesheet"]':"";if(!!i)for(let m=o.length-1;m>=0;m--){const d=o[m];if(d.href===a&&(!l||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${h}`))return;const _=document.createElement("link");if(_.rel=l?"stylesheet":ae,l||(_.as="script",_.crossOrigin=""),_.href=a,document.head.appendChild(_),l)return new Promise((m,d)=>{_.addEventListener("load",m),_.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${a}`)))})}))}return t.then(()=>e()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})},ce={__name:"DateItem",props:{date:{type:String,required:!0}},setup(s){const{sharedContext:e}=$(),n=s,i=b(()=>{var o,a,l;return new Intl.DateTimeFormat((o=e==null?void 0:e.timezoneInfo)==null?void 0:o.region.replace("_","-"),{timeZone:(a=e==null?void 0:e.timezoneInfo)==null?void 0:a.timezone,hourCycle:(l=e==null?void 0:e.timezoneInfo)!=null&&l.time_24h?"h23":"h12",timeStyle:"short",dateStyle:"short"}).format(new Date(n.date))});return(t,o)=>(c(),u("span",null,v(i.value),1))}},x=(s,e)=>{const n=s.__vccOpts||s;for(const[i,t]of e)n[i]=t;return n},le=s=>(W("data-v-60059d99"),s=s(),Y(),s),de={class:"empty-placeholder"},ue={class:"empty-placeholder_content"},pe={class:"empty-placeholder_icon"},fe=["icon-name"],_e=le(()=>f("ui-icon",{"icon-name":"googleAddBaseline",color:"#2C98F0",size:"18"},null,-1)),he={__name:"EmptyPlaceholder",props:{title:{type:String,default:"No data"},message:{type:String,default:"There is no data to be shown."},icon:{type:String,default:"googleQuestionMarkBaseline"},action:{type:String,default:""}},emits:["actionClicked"],setup(s){return(e,n)=>(c(),u("div",de,[f("div",ue,[f("div",pe,[f("ui-icon",{"icon-name":s.icon,color:"#BDBDBD",size:"56"},null,8,fe)]),f("h2",null,v(s.title),1),f("p",null,v(s.message),1),s.action?(c(),u("ui-button",{key:0,class:"empty-placeholder_action","background-color":"transparent",color:"#2C98F0",onClicked:n[0]||(n[0]=i=>e.$emit("actionClicked"))},[_e,f("span",null,v(s.action),1)],32)):w("",!0)])]))}},me=x(he,[["__scopeId","data-v-60059d99"]]),ge=(s,e)=>{let n=`Error ${s.status}: ${s.statusText}.`;return e&&(e.error_code&&(n+=` Error code: ${e.error_code}.`),e.errors&&e.errors.map(i=>{n+=` ${i}`})),n},ye=async s=>{let e;try{e=await s.clone().json()}catch{e=await s.text()}return e},ve=async(s,e="GET",n=null,i=!1)=>{const t={method:e};n&&(t.body=n);const o=await fetch(s,t),a=await ye(o);if(!o.ok){const l=ge(o,a);throw new Error(l)}return i?{...o,body:a}:a},S=(s,e=!1)=>{const n=L(!1),i=N({});return{loading:n,responseObject:i,request:async(o,a,l)=>{n.value=!0;try{const h=await ve(o,a,l);Object.assign(i,h)}catch(h){if(s.emit("snackbar:error",h.message),e)throw h}finally{n.value=!1}}}},y={NICE_GREEN:"#0BB071",NICE_RED:"#FF6A6A",MIDDLE_GREY:"#BDBDBD",DARK_GREY:"#666666",TEXT:"#212121",WHITE:"#FFFFFF",TRANSPARENT:"transparent"},B={ENABLED:"enabled",DISABLED:"disabled"},ke={[B.ENABLED]:{text:"Enabled",icon:"googleFiberManualRecordBaseline",color:y.NICE_GREEN},[B.DISABLED]:{text:"Disabled",icon:"googleFiberManualRecordBaseline",color:y.MIDDLE_GREY}},Ee={class:"feed-actions",align:"right"},be={slot:"trigger"},De={slot:"content",class:"actions-menu"},we={key:0,class:"horizontal-divider"},Se=["background-color","color","disabled","onClicked"],$e={class:"button-content"},xe=["icon-name","color"],Ie={__name:"FeedActions",props:{feed:{type:Object,required:!0}},emits:["enabled","disabled","uploaded","deleted"],setup(s,{emit:e}){const n=s,i=e,t=$(),o=S(t,!0),a=S(t,!0),l=S(t,!0),h=S(t,!0),k=b(()=>n.feed.id),_=b(()=>n.feed.status===B.DISABLED),m=N([{action:"disable",color:y.TEXT,text:"Disable",icon:"googleToggleOffBaseline",loading:a.loading,hide:_,handler:async()=>{try{await a.request(`/api/feeds/${k.value}/disable`,"POST"),i("disabled")}catch{}}},{action:"enable",color:y.TEXT,text:"Enable",icon:"googleToggleOnBaseline",loading:o.loading,hide:!_.value,handler:async()=>{try{await o.request(`/api/feeds/${k.value}/enable`,"POST"),i("enabled")}catch{}}},{action:"forceUpload",color:y.TEXT,text:"Force upload",icon:"googleUploadBaseline",loading:h.loading,disabled:_.value,handler:async()=>{try{await h.request(`/api/feeds/${k.value}/uploads/force`,"POST"),i("uploaded")}catch{}}},{separated:!0,action:"delete",color:y.NICE_RED,text:"Delete",icon:"googleDeleteForeverBaseline",loading:l.loading,handler:async()=>{try{await l.request(`/api/feeds/${k.value}`,"DELETE"),i("deleted")}catch{}}}]);return(d,D)=>(c(),u("ui-menu",Ee,[f("div",be,[C(d.$slots,"default",{},void 0,!0)]),f("div",De,[(c(!0),u(T,null,A(m,r=>(c(),u("div",{key:r.action,class:"action-button__wrapper"},[r.separated?(c(),u("div",we)):w("",!0),r.hide?w("",!0):(c(),u("ui-button",{key:1,ref_for:!0,ref:r.action,class:"action-button","background-color":p(y).TRANSPARENT,color:r.color,disabled:r.disabled,height:"32px",width:"156px",onClicked:r.handler},[f("div",$e,[f("ui-icon",{"icon-name":r.loading?"connectLoaderAnimated":r.icon,color:r.color,size:"18"},null,8,xe),f("span",null,v(r.text),1)])],40,Se))]))),128))])]))}},Te=x(Ie,[["__scopeId","data-v-ef15068b"]]),Ae={class:"loading-indicator"},Be=["size"],Fe={__name:"LoadingIndicator",props:{size:{type:[Number,String],default:76}},setup(s){return(e,n)=>(c(),u("div",Ae,[f("ui-icon",{"icon-name":"connectLoaderAnimated",size:s.size,color:"#4797f2"},null,8,Be)]))}},Re=x(Fe,[["__scopeId","data-v-0c05ee87"]]),Le={__name:"SpaLink",props:{to:{type:[String,Object,Symbol],default:""},params:{type:[String,Number,Object],required:!1,default:void 0}},setup(s){const e=s,{navigateTo:n}=$(),i=t=>{t.preventDefault(),t.stopPropagation(),n(e.to,e.params)};return(t,o)=>(c(),u("a",{onClick:i},[C(t.$slots,"default")]))}},Ne={title:"Feeds",style:{"min-height":"inherit"},"no-padded":""},Ce=["total-items","current-page"],Oe=["icon-name","icon-color","text"],Pe=["background-color"],ze=["color"],qe={key:5,class:"truncator"},Me={__name:"FeedsView",setup(s){const e=[{key:"id",text:"ID",width:"130px"},{key:"schedule",text:"Report Schedule",width:"215px"},{key:"createdAt",text:"created",width:"200px"},{key:"description",text:"description"},{key:"status",text:"status",width:"105px"},{key:"actions",width:"36px"}],{items:n,page:i,total:t,load:o,loading:a,next:l,previous:h}=O("/api/feeds"),k=b(()=>!n.value.length),_=b(()=>n.value.map(d=>({id:d.id,scheduleId:d.schedule.id,createdAt:d.events.created.at,description:d.description,status:ke[d.status],rawFeed:d}))),m=()=>{};return K(async()=>{await o()}),(d,D)=>(c(),u("ui-view",Ne,[p(a)?(c(),E(Re,{key:0})):k.value?(c(),E(me,{key:1,title:"No Feeds",icon:"googleAutoGraphBaseline",action:"Create Feed",onActionClicked:m})):(c(),u("ui-complex-table",{key:2,headers:e,"total-items":p(t),"current-page":p(i),fixed:"",onNextClicked:D[0]||(D[0]=(...r)=>p(l)&&p(l)(...r)),onPreviousClicked:D[1]||(D[1]=(...r)=>p(h)&&p(h)(...r))},[(c(!0),u(T,null,A(_.value,r=>(c(),u("tr",{key:r.id},[(c(),u(T,null,A(e,g=>f("td",{key:g.key},[g.key==="id"?(c(),E(p(Q),{key:0,to:{name:"feeds.details",params:{id:r.id}}},{default:I(()=>[F(v(r.id),1)]),_:2},1032,["to"])):g.key==="schedule"?(c(),E(Le,{key:1,to:p(P).reportsScheduleDetails,params:r.scheduleId},{default:I(()=>[F(v(r.scheduleId),1)]),_:2},1032,["to","params"])):g.key==="status"?(c(),u("ui-status",{key:2,"icon-name":r.status.icon,"icon-color":r.status.color,text:r.status.text},null,8,Oe)):g.key==="createdAt"?(c(),E(ce,{key:3,date:r.createdAt},null,8,["date"])):w("",!0),g.key==="actions"?(c(),E(Te,{key:4,feed:r.rawFeed,onEnabled:p(o),onDisabled:p(o),onUploaded:p(o),onDeleted:p(o)},{default:I(()=>[f("ui-button",{class:"actions-button","background-color":p(y).WHITE,height:"36px",width:"36px"},[f("ui-icon",{class:"actions-button__trigger-icon",color:p(y).TEXT,"icon-name":"googleMoreVertBaseline"},null,8,ze)],8,Pe)]),_:2},1032,["feed","onEnabled","onDisabled","onUploaded","onDeleted"])):g.key==="description"?(c(),u("div",qe,[f("span",{class:Z(["truncate-text",{"assistive-color":!r[g.key]}])},v(r[g.key]||"â€”"),3)])):w("",!0)])),64))]))),128))],40,Ce))]))}},Ve=x(Me,[["__scopeId","data-v-b2e23fd7"]]),Ue=[{path:"/",redirect:{name:"feeds"}},{name:"feeds",path:"/feeds",component:Ve},{name:"feeds.details",path:"/feeds/:id",component:()=>ie(()=>import("./FeedDetails-BjgRr18s.js"),__vite__mapDeps([0,1,2,3]))}],je=J({history:ee(),routes:Ue}),Ge={__name:"MainPage",setup(s){const e=L(""),n=b(()=>({minHeight:e.value}));return $().listen("containerSize",t=>{e.value=t.height}),(t,o)=>(c(),u("div",{class:"app",style:se(n.value)},[te(p(oe))],4))}};z({"ui-view":q,"ui-complex-table":M,"ui-icon":V,"ui-button":U,"ui-status":j,"ui-menu":G,"ui-tabs":H}).then(s=>{const e=ne(Ge);e.use(je),e.use(X,s),e.mount("#app")});export{y as C,Te as F,Re as L,ke as S,x as _,Le as a,ce as b,S as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/FeedDetails-BjgRr18s.js","assets/connect-C3hWo6Jn.js","assets/vendor-DFOWnqr8.js","assets/FeedDetails-E0CkNN8H.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
